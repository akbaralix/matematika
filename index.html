<!DOCTYPE html>
<html lang="u">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Matematik</title>
  </head>
  <body>
    <div id="menyu" class="menyu">
      <button onclick="boshlash()">‚ñ∂Ô∏è Boshlash</button>
      <button onclick="statistika()">üìä Statistika</button>
    </div>
    <div id="game-container" class="game-container">
      <div class="container">
        <div class="control-container">
          <div class="togrijavob">‚úÖ 0</div>
          <div class="xatolar">‚ùå 0</div>
          <div class="time">‚è≥ 00</div>
        </div>
        <div class="game-bar">
          <div class="randomnumber">
            <span id="randomnum1"></span>
          </div>
          <div class="variantlar">
            <span id="javob" class="javob"></span>
            <span id="javob" class="javob"></span>
            <span id="javob" class="javob"></span>
          </div>
        </div>
        <button class="Orqaga" onclick="location.reload()">üîô Orqaga</button>
      </div>
    </div>
    <div class="statistika-container">
      <h2>Statistika</h2>
      <div class="user-statistik">
        <img src="" alt="user-img" />
        <span id="username">Akbarali</span>
        <p>To'g'ri javoblar soni: <span id="stat-togri">0</span></p>
        <p>Xato javoblar soni: <span id="stat-xato">0</span></p>
      </div>
      <button class="Orqaga" onclick="location.reload()">üîô Orqaga</button>
    </div>

    <script>
      const randomnum1 = document.getElementById("randomnum1");
      const javoblar = document.querySelectorAll(".javob");
      const timeDisplay = document.querySelector(".time");

      let togri = 0;
      let xato = 0;
      let togrijavob = document.querySelector(".togrijavob");
      let xatolar = document.querySelector(".xatolar");

      let currentAnswer = null; // global javob

      function startgame() {
        let random1 = Math.floor(Math.random() * 10);
        let random2 = Math.floor(Math.random() * 10);

        const amal = Math.random() < 0.5 ? "+" : "-";

        // kichik sondan katta sonni ayirmaslik
        if (amal === "-" && random1 < random2) {
          [random1, random2] = [random2, random1];
        }

        currentAnswer = amal === "+" ? random1 + random2 : random1 - random2;

        // misolni chiqarish
        randomnum1.textContent = `${random1} ${amal} ${random2} = ?`;

        const variantlar = [
          currentAnswer,
          currentAnswer + Math.floor(Math.random() * 3) + 1,
          currentAnswer - Math.floor(Math.random() * 3) - 1,
        ].sort(() => Math.random() - 0.5);

        javoblar.forEach((el, i) => {
          el.textContent = variantlar[i];
        });
      }

      // javob bosilganda tekshirish
      javoblar.forEach((el) => {
        el.addEventListener("click", () => {
          if (parseInt(el.textContent) === currentAnswer) {
            togri++;
            togrijavob.textContent = `‚úÖ ${togri}`;
          } else {
            xato++;
            xatolar.textContent = `‚ùå ${xato}`;
            if (xato === 4) {
              localStorage.setItem("togri", togri);
              alert(`O'yin tugadi! To'g'ri javoblar soni: ${togri}`);

              return;
            }
          }
          startgame(); // keyingi misolga o'tish
        });
      });

      function boshlash() {
        document.getElementById("game-container").style.display = "block";
        document.getElementById("menyu").style.display = "none";
        startgame(); // o‚Äòyinni boshlash
      }
      function statistika() {
        document.querySelector(".statistika-container").style.display = "block";
        document.getElementById("menyu").style.display = "none";
      }
    </script>
  </body>
</html>
